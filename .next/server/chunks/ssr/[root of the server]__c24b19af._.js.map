{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 215, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/ai/genkit.ts"],"sourcesContent":["import {genkit} from 'genkit';\nimport {googleAI} from '@genkit-ai/googleai';\n\nexport const ai = genkit({\n  plugins: [googleAI()],\n  model: 'googleai/gemini-2.0-flash',\n});\n"],"names":[],"mappings":";;;AAAA;AAAA;AACA;AAAA;;;AAEO,MAAM,KAAK,CAAA,GAAA,uIAAA,CAAA,SAAM,AAAD,EAAE;IACvB,SAAS;QAAC,CAAA,GAAA,2KAAA,CAAA,WAAQ,AAAD;KAAI;IACrB,OAAO;AACT","debugId":null}},
    {"offset": {"line": 236, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/ai/flows/defi-strategy-explanation.ts"],"sourcesContent":["\n'use server';\n\n/**\n * @fileOverview Explains DeFi strategies using Gemini.\n *\n * - explainDefiStrategy - A function that explains a given DeFi strategy.\n * - ExplainDefiStrategyInput - The input type for the explainDefiStrategy function.\n * - ExplainDefiStrategyOutput - The return type for the explainDefiStrategy function.\n */\n\nimport {ai} from '@/ai/genkit';\nimport {z} from 'genkit';\n\nconst ExplainDefiStrategyInputSchema = z.object({\n  strategy: z.string().describe('The DeFi strategy to explain (e.g., yield farming, flash loans).'),\n  // Removed okxDexMarketConditions and userTokenHoldings, as specific context for general explanations might be too broad.\n  // These are better suited for personalized suggestions or specific simulation explanations.\n});\nexport type ExplainDefiStrategyInput = z.infer<typeof ExplainDefiStrategyInputSchema>;\n\nconst ExplainDefiStrategyOutputSchema = z.object({\n  explanation: z.string().describe('A clear and concise explanation of the DeFi strategy, including mechanics and risks. Format your explanation using basic HTML: use `<h3>` for section titles, `<strong>` for bold text, and `<ul>` or `<ol>` with `<li>` for lists. Paragraphs should be wrapped in `<p>` tags. Example: \"<h3>Mechanics</h3><p>Strategy works by...</p><ul><li>Step 1</li></ul>\". Do not use Markdown syntax like \"###\" or \"**\".'),\n});\nexport type ExplainDefiStrategyOutput = z.infer<typeof ExplainDefiStrategyOutputSchema>;\n\nexport async function explainDefiStrategy(input: ExplainDefiStrategyInput): Promise<ExplainDefiStrategyOutput> {\n  return explainDefiStrategyFlow(input);\n}\n\nconst prompt = ai.definePrompt({\n  name: 'explainDefiStrategyPrompt',\n  input: {schema: ExplainDefiStrategyInputSchema},\n  output: {schema: ExplainDefiStrategyOutputSchema},\n  prompt: `You are a DeFi expert. Explain the following DeFi strategy to the user in detail.\n  Your explanation should cover:\n  1.  **Mechanics**: How does this strategy work? What are the steps involved?\n  2.  **Potential Risks**: What are the common risks associated with this strategy (e.g., impermanent loss, smart contract vulnerabilities, liquidation, market volatility)? Explain each risk clearly.\n  3.  **Considerations for OKX DEX & X Layer**: If relevant, how might this strategy apply or differ on OKX DEX or OKX's L2, X Layer? Mention the potential benefits of X Layer, such as lower gas fees and faster transactions, for executing DeFi strategies.\n  4.  **Before Proceeding**: What key things should a user research or consider before engaging in this strategy?\n\n  When discussing token swaps or strategies that involve exchanging assets, if applicable, briefly mention that users can explore services like 0x.org which may offer gasless swap quotes, potentially saving on transaction fees. Highlight this point by wrapping the mention in <strong> tags. For example: \"<strong>Consider exploring gasless swap options:</strong> Services like 0x.org can provide quotes for gasless swaps, which might be beneficial for this strategy by potentially reducing transaction costs.\" Explain that this is for getting quotes and actual gasless execution is a separate step involving more complex interactions.\n\n  Present the information in a structured and easy-to-understand manner. Use basic HTML tags for headings (<h3>), lists (<ul>, <ol>, <li>), paragraphs (<p>), and bold text (<strong>) to improve readability. Do not output raw Markdown.\n\n  Strategy: {{{strategy}}}`,\n});\n\nconst explainDefiStrategyFlow = ai.defineFlow(\n  {\n    name: 'explainDefiStrategyFlow',\n    inputSchema: ExplainDefiStrategyInputSchema,\n    outputSchema: ExplainDefiStrategyOutputSchema,\n  },\n  async input => {\n    const {output} = await prompt(input);\n    return output!;\n  }\n);\n"],"names":[],"mappings":";;;;;AAGA;;;;;;CAMC,GAED;AACA;AAAA;;;;;;AAEA,MAAM,iCAAiC,uIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;IAC9C,UAAU,uIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,QAAQ,CAAC;AAGhC;AAGA,MAAM,kCAAkC,uIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;IAC/C,aAAa,uIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,QAAQ,CAAC;AACnC;AAGO,eAAe,uCAAiB,GAAjB,oBAAoB,KAA+B;IACvE,OAAO,wBAAwB;AACjC;AAEA,MAAM,SAAS,mHAAA,CAAA,KAAE,CAAC,YAAY,CAAC;IAC7B,MAAM;IACN,OAAO;QAAC,QAAQ;IAA8B;IAC9C,QAAQ;QAAC,QAAQ;IAA+B;IAChD,QAAQ,CAAC;;;;;;;;;;;0BAWe,CAAC;AAC3B;AAEA,MAAM,0BAA0B,mHAAA,CAAA,KAAE,CAAC,UAAU,CAC3C;IACE,MAAM;IACN,aAAa;IACb,cAAc;AAChB,GACA,OAAM;IACJ,MAAM,EAAC,MAAM,EAAC,GAAG,MAAM,OAAO;IAC9B,OAAO;AACT;;;IA/BoB;;AAAA,+OAAA","debugId":null}},
    {"offset": {"line": 304, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/ai/flows/personalized-strategy-suggestions.ts"],"sourcesContent":["\n'use server';\n\n/**\n * @fileOverview A personalized DeFi strategy suggestion AI agent based on user's token holdings, market conditions, and risk profile.\n *\n * - personalizedStrategySuggestions - A function that suggests DeFi strategies.\n * - PersonalizedStrategySuggestionsInput - The input type for the personalizedStrategySuggestions function.\n * - PersonalizedStrategySuggestionsOutput - The return type for the personalizedStrategySuggestions function.\n */\n\nimport {ai} from '@/ai/genkit';\nimport type { RiskProfile } from '@/types';\nimport {z} from 'genkit';\n\nconst PersonalizedStrategySuggestionsInputSchema = z.object({\n  userTokenHoldings: z\n    .string()\n    .describe(\"The user's token holdings in their connected Metamask wallet. Should be in a readable format (e.g., '2.5 ETH, 5000 USDC').\"),\n  okxDexMarketConditions: z.string().describe('Real-time or simulated market conditions on OKX DEX.'),\n  riskProfile: z.enum(['conservative', 'balanced', 'aggressive']).optional().describe(\"The user's selected risk profile. 'conservative' favors low-risk, stable returns. 'balanced' seeks a mix of growth and safety. 'aggressive' targets higher yields with higher risk tolerance.\"),\n});\nexport type PersonalizedStrategySuggestionsInput = z.infer<typeof PersonalizedStrategySuggestionsInputSchema>;\n\nconst PersonalizedStrategySuggestionsOutputSchema = z.object({\n  suggestedStrategies: z\n    .string()\n    .describe('A list of 3-5 suggested DeFi strategies on OKX DEX or X Layer, personalized to the user. Format as an HTML ordered list (e.g., \"<ol><li><strong>Strategy Name:</strong> Description...</li></ol>\"). Include specific examples like token amounts if applicable.'),\n  rationale: z\n    .string()\n    .describe('The rationale behind the suggested strategies, considering the user holdings, market conditions, and risk profile. Format as HTML paragraphs using `<p>` tags, possibly using `<strong>` for emphasis. Ensure it is a valid HTML string.'),\n});\nexport type PersonalizedStrategySuggestionsOutput = z.infer<typeof PersonalizedStrategySuggestionsOutputSchema>;\n\nexport async function personalizedStrategySuggestions(input: PersonalizedStrategySuggestionsInput): Promise<PersonalizedStrategySuggestionsOutput> {\n  return personalizedStrategySuggestionsFlow(input);\n}\n\nconst prompt = ai.definePrompt({\n  name: 'personalizedStrategySuggestionsPrompt',\n  input: {schema: PersonalizedStrategySuggestionsInputSchema},\n  output: {schema: PersonalizedStrategySuggestionsOutputSchema},\n  prompt: `You are an AI DeFi strategist specializing in personalized investment recommendations based on user holdings, real-time market conditions on OKX DEX, and their risk profile.\n\n  Given the following information:\n  User Token Holdings: {{{userTokenHoldings}}}\n  OKX DEX Market Conditions: {{{okxDexMarketConditions}}}\n  {{#if riskProfile}}User Risk Profile: {{{riskProfile}}}{{/if}}\n\n  Please provide:\n  1.  **Suggested Strategies**: A list of 3-5 specific DeFi strategies suitable for the user. Prioritize strategies on OKX's L2, X Layer, where applicable, highlighting the benefits of lower gas fees and faster execution. Also include strategies for OKX DEX on other mainnets if relevant. For each strategy, briefly explain it and, where appropriate, suggest example allocations based on their holdings (e.g., \"Allocate X amount of Y token...\"). If any strategy involves token swaps, mention the possibility of using a service like 0x.org to find gasless swap quotes, which could reduce transaction costs. Highlight this benefit using <strong> tags. For example: \"For token swaps involved in this strategy, <strong>you could look into gasless swap quotes via 0x.org</strong> to potentially save on fees. Remember this provides a quote; actual gasless execution is a more involved process.\" Format this as an HTML ordered list (e.g., \"<ol><li><strong>Strategy Name on X Layer:</strong> Description...</li></ol>\").\n  2.  **Rationale**: A concise explanation for why these strategies are being recommended, considering their portfolio, the market conditions, potential yield, risk (impermanent loss, liquidation risk), gas fees, {{#if riskProfile}}and importantly, their stated risk profile: '{{{riskProfile}}}'.\n      *   If 'conservative', prioritize capital preservation and stable, lower-risk yields (e.g., lending stablecoins, staking well-established assets on X Layer or mainnet).\n      *   If 'balanced', suggest a mix of strategies, some for stability and some for moderate growth with acceptable risk.\n      *   If 'aggressive', include options with higher potential returns, even if they come with higher volatility or newer protocols (always with clear risk warnings).\n      Acknowledge the risk profile in your rationale.{{else}}and general best practices.{{/if}} Format this as HTML, using <p> tags for paragraphs and <strong> for emphasis.\n\n  Prioritize strategies that align with the user's existing assets, the provided market conditions, {{#if riskProfile}}and their selected risk profile.{{else}}and general best practices.{{/if}}\n  Ensure your output uses basic HTML tags (e.g. <p>, <strong>, <ul>, <ol>, <li>) for lists, paragraphs, and bolding to improve readability. Do not output raw Markdown.\n  Example for a suggested strategy list item: \"<li><strong>ETH Staking on X Layer Pool:</strong> Stake a portion of your ETH (e.g., 1 ETH) on a protocol on X Layer to earn steady returns with lower transaction fees...</li>\"\n  `,\n});\n\nconst personalizedStrategySuggestionsFlow = ai.defineFlow(\n  {\n    name: 'personalizedStrategySuggestionsFlow',\n    inputSchema: PersonalizedStrategySuggestionsInputSchema,\n    outputSchema: PersonalizedStrategySuggestionsOutputSchema,\n  },\n  async input => {\n    const {output} = await prompt(input);\n    return output!;\n  }\n);\n"],"names":[],"mappings":";;;;;AAGA;;;;;;CAMC,GAED;AAEA;AAAA;;;;;;AAEA,MAAM,6CAA6C,uIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;IAC1D,mBAAmB,uIAAA,CAAA,IAAC,CACjB,MAAM,GACN,QAAQ,CAAC;IACZ,wBAAwB,uIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,QAAQ,CAAC;IAC5C,aAAa,uIAAA,CAAA,IAAC,CAAC,IAAI,CAAC;QAAC;QAAgB;QAAY;KAAa,EAAE,QAAQ,GAAG,QAAQ,CAAC;AACtF;AAGA,MAAM,8CAA8C,uIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;IAC3D,qBAAqB,uIAAA,CAAA,IAAC,CACnB,MAAM,GACN,QAAQ,CAAC;IACZ,WAAW,uIAAA,CAAA,IAAC,CACT,MAAM,GACN,QAAQ,CAAC;AACd;AAGO,eAAe,uCAA6B,GAA7B,gCAAgC,KAA2C;IAC/F,OAAO,oCAAoC;AAC7C;AAEA,MAAM,SAAS,mHAAA,CAAA,KAAE,CAAC,YAAY,CAAC;IAC7B,MAAM;IACN,OAAO;QAAC,QAAQ;IAA0C;IAC1D,QAAQ;QAAC,QAAQ;IAA2C;IAC5D,QAAQ,CAAC;;;;;;;;;;;;;;;;;;EAkBT,CAAC;AACH;AAEA,MAAM,sCAAsC,mHAAA,CAAA,KAAE,CAAC,UAAU,CACvD;IACE,MAAM;IACN,aAAa;IACb,cAAc;AAChB,GACA,OAAM;IACJ,MAAM,EAAC,MAAM,EAAC,GAAG,MAAM,OAAO;IAC9B,OAAO;AACT;;;IAtCoB;;AAAA,+OAAA","debugId":null}},
    {"offset": {"line": 386, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/services/okxService.ts"],"sourcesContent":["\n'use server';\n/**\n * @fileOverview Service for interacting with the OKX API (v5).\n *\n * This service encapsulates calls to the OKX DEX API for fetching\n * market data, token prices, etc.\n *\n * OKX API v5 Documentation: https://www.okx.com/docs-v5/en/\n * Authentication: https://www.okx.com/docs-v5/en/#overview-authentication\n */\n\nimport crypto from 'crypto';\n\nconst OKX_API_BASE_URL = 'https://www.okx.com';\n\ninterface OkxApiErrorResponse {\n  code: string;\n  msg: string;\n  data: any[];\n}\n\ninterface OkxTicker {\n  instType: string;\n  instId: string;\n  last: string;\n  lastSz: string;\n  askPx: string;\n  askSz: string;\n  bidPx: string;\n  bidSz: string;\n  open24h: string;\n  high24h: string;\n  low24h: string;\n  volCcy24h: string; // Volume in currency (e.g., USDT)\n  vol24h: string;    // Volume in token (e.g., BTC)\n  ts: string;\n  sodUtc0: string;\n  sodUtc8: string;\n}\n\n\n// Helper function to generate authentication headers for OKX API v5\nconst getOkxAuthHeaders = (method: string, requestPath: string, body?: string | object) => {\n  const timestamp = new Date().toISOString();\n  const apiKey = process.env.OKX_API_KEY;\n  const secretKey = process.env.OKX_SECRET_KEY;\n  const passphrase = process.env.OKX_PASSPHRASE;\n\n  if (!apiKey || !secretKey || !passphrase) {\n    console.error('OKX_API_KEY, OKX_SECRET_KEY, or OKX_PASSPHRASE is not configured in .env');\n    // This will cause API calls to fail if credentials are not set\n    return null;\n  }\n\n  let bodyString = '';\n  if (body) {\n    if (typeof body === 'object') {\n      bodyString = JSON.stringify(body);\n    } else {\n      bodyString = body;\n    }\n  }\n  \n  const signaturePayload = timestamp + method.toUpperCase() + requestPath + bodyString;\n  \n  const signature = crypto\n    .createHmac('sha256', secretKey)\n    .update(signaturePayload)\n    .digest('base64');\n\n  return {\n    'OK-ACCESS-KEY': apiKey,\n    'OK-ACCESS-SIGN': signature,\n    'OK-ACCESS-TIMESTAMP': timestamp,\n    'OK-ACCESS-PASSPHRASE': passphrase,\n    'Content-Type': 'application/json',\n  };\n};\n\n/**\n * Fetches a summary of current market conditions from OKX DEX.\n * It fetches ticker data for major pairs like BTC-USDT, ETH-USDT, and OKT-USDT.\n */\nexport async function fetchOkxMarketSummary(): Promise<string> {\n  const pairsToFetch = ['BTC-USDT', 'ETH-USDT', 'OKT-USDT'];\n  let summaryParts: string[] = [];\n\n  try {\n    for (const pair of pairsToFetch) {\n      const requestPath = `/api/v5/market/ticker?instId=${pair}`;\n      const authHeaders = getOkxAuthHeaders('GET', requestPath);\n\n      if (!authHeaders) {\n        return \"OKX API credentials not configured. Cannot fetch market data.\";\n      }\n\n      const response = await fetch(`${OKX_API_BASE_URL}${requestPath}`, {\n        method: 'GET',\n        headers: authHeaders,\n      });\n\n      if (!response.ok) {\n        const errorData = await response.json() as OkxApiErrorResponse;\n        console.error(`OKX API Error for ${pair} (${requestPath}): ${response.status}`, errorData);\n        summaryParts.push(`${pair}: Error fetching data (${errorData.msg || response.statusText})`);\n        continue;\n      }\n\n      const result = await response.json();\n      if (result.data && result.data.length > 0) {\n        const ticker = result.data[0] as OkxTicker;\n        const price = parseFloat(ticker.last).toFixed(2);\n        const openPrice = parseFloat(ticker.open24h);\n        const change = openPrice !== 0 ? ((parseFloat(ticker.last) - openPrice) / openPrice) * 100 : 0;\n        summaryParts.push(`${ticker.instId} last price: ${price} USDT (24h Change: ${change.toFixed(2)}%, 24h Vol: ${parseFloat(ticker.volCcy24h).toLocaleString()} USDT)`);\n      } else {\n        summaryParts.push(`${pair}: No data found.`);\n      }\n    }\n\n    if (summaryParts.length === 0) {\n      return \"Failed to fetch any market data from OKX.\";\n    }\n    return `OKX DEX Real Data Snapshot: ${summaryParts.join('; ')}. Market conditions are dynamic.`;\n\n  } catch (error: any) {\n    console.error('Error fetching OKX market summary:', error);\n    // Check if the error is due to fetch itself (e.g. network error)\n    if (error.cause && error.cause.code === 'UND_ERR_CONNECT_TIMEOUT') {\n        return 'Failed to connect to OKX API for market summary (Connection Timeout). Using fallback: Market is dynamic.';\n    }\n    return `Failed to connect to OKX API for market summary. Error: ${error.message || 'Unknown error'}. Using fallback: Market is dynamic.`;\n  }\n}\n\n/**\n * Fetches the current USD price for a given token symbol from OKX.\n * Assumes the token is traded against USDT.\n */\nexport async function fetchTokenPriceFromOKX(tokenSymbol: string): Promise<number | null> {\n  const normalizedSymbol = tokenSymbol.toUpperCase();\n  if (normalizedSymbol === 'USDT' || normalizedSymbol === 'USDC') return 1.00; // Stablecoins\n\n  const instId = `${normalizedSymbol}-USDT`;\n  const requestPath = `/api/v5/market/ticker?instId=${instId}`;\n  const authHeaders = getOkxAuthHeaders('GET', requestPath);\n\n  if (!authHeaders) {\n    console.error(\"OKX API credentials not configured. Cannot fetch token price.\");\n    return null;\n  }\n\n  try {\n    const response = await fetch(`${OKX_API_BASE_URL}${requestPath}`, {\n      method: 'GET',\n      headers: authHeaders,\n    });\n\n    if (!response.ok) {\n      const errorData = await response.json() as OkxApiErrorResponse;\n      console.error(`OKX Price API Error for ${instId} (${requestPath}): ${response.status}`, errorData);\n      return null;\n    }\n\n    const result = await response.json();\n    if (result.data && result.data.length > 0 && result.data[0].last) {\n      return parseFloat(result.data[0].last);\n    }\n    console.warn(`No price data found for ${instId} on OKX.`);\n    return null;\n  } catch (error: any) {\n    console.error(`Error fetching price for ${tokenSymbol} from OKX:`, error);\n    return null;\n  }\n}\n"],"names":[],"mappings":";;;;;;AAEA;;;;;;;;CAQC,GAED;;;;;AAEA,MAAM,mBAAmB;AA4BzB,oEAAoE;AACpE,MAAM,oBAAoB,CAAC,QAAgB,aAAqB;IAC9D,MAAM,YAAY,IAAI,OAAO,WAAW;IACxC,MAAM,SAAS,QAAQ,GAAG,CAAC,WAAW;IACtC,MAAM,YAAY,QAAQ,GAAG,CAAC,cAAc;IAC5C,MAAM,aAAa,QAAQ,GAAG,CAAC,cAAc;IAE7C,IAAI,CAAC,UAAU,CAAC,aAAa,CAAC,YAAY;QACxC,QAAQ,KAAK,CAAC;QACd,+DAA+D;QAC/D,OAAO;IACT;IAEA,IAAI,aAAa;IACjB,IAAI,MAAM;QACR,IAAI,OAAO,SAAS,UAAU;YAC5B,aAAa,KAAK,SAAS,CAAC;QAC9B,OAAO;YACL,aAAa;QACf;IACF;IAEA,MAAM,mBAAmB,YAAY,OAAO,WAAW,KAAK,cAAc;IAE1E,MAAM,YAAY,qGAAA,CAAA,UAAM,CACrB,UAAU,CAAC,UAAU,WACrB,MAAM,CAAC,kBACP,MAAM,CAAC;IAEV,OAAO;QACL,iBAAiB;QACjB,kBAAkB;QAClB,uBAAuB;QACvB,wBAAwB;QACxB,gBAAgB;IAClB;AACF;AAMO,eAAe,uCAAmB,GAAnB;IACpB,MAAM,eAAe;QAAC;QAAY;QAAY;KAAW;IACzD,IAAI,eAAyB,EAAE;IAE/B,IAAI;QACF,KAAK,MAAM,QAAQ,aAAc;YAC/B,MAAM,cAAc,CAAC,6BAA6B,EAAE,MAAM;YAC1D,MAAM,cAAc,kBAAkB,OAAO;YAE7C,IAAI,CAAC,aAAa;gBAChB,OAAO;YACT;YAEA,MAAM,WAAW,MAAM,MAAM,GAAG,mBAAmB,aAAa,EAAE;gBAChE,QAAQ;gBACR,SAAS;YACX;YAEA,IAAI,CAAC,SAAS,EAAE,EAAE;gBAChB,MAAM,YAAY,MAAM,SAAS,IAAI;gBACrC,QAAQ,KAAK,CAAC,CAAC,kBAAkB,EAAE,KAAK,EAAE,EAAE,YAAY,GAAG,EAAE,SAAS,MAAM,EAAE,EAAE;gBAChF,aAAa,IAAI,CAAC,GAAG,KAAK,uBAAuB,EAAE,UAAU,GAAG,IAAI,SAAS,UAAU,CAAC,CAAC,CAAC;gBAC1F;YACF;YAEA,MAAM,SAAS,MAAM,SAAS,IAAI;YAClC,IAAI,OAAO,IAAI,IAAI,OAAO,IAAI,CAAC,MAAM,GAAG,GAAG;gBACzC,MAAM,SAAS,OAAO,IAAI,CAAC,EAAE;gBAC7B,MAAM,QAAQ,WAAW,OAAO,IAAI,EAAE,OAAO,CAAC;gBAC9C,MAAM,YAAY,WAAW,OAAO,OAAO;gBAC3C,MAAM,SAAS,cAAc,IAAI,AAAC,CAAC,WAAW,OAAO,IAAI,IAAI,SAAS,IAAI,YAAa,MAAM;gBAC7F,aAAa,IAAI,CAAC,GAAG,OAAO,MAAM,CAAC,aAAa,EAAE,MAAM,mBAAmB,EAAE,OAAO,OAAO,CAAC,GAAG,YAAY,EAAE,WAAW,OAAO,SAAS,EAAE,cAAc,GAAG,MAAM,CAAC;YACpK,OAAO;gBACL,aAAa,IAAI,CAAC,GAAG,KAAK,gBAAgB,CAAC;YAC7C;QACF;QAEA,IAAI,aAAa,MAAM,KAAK,GAAG;YAC7B,OAAO;QACT;QACA,OAAO,CAAC,4BAA4B,EAAE,aAAa,IAAI,CAAC,MAAM,gCAAgC,CAAC;IAEjG,EAAE,OAAO,OAAY;QACnB,QAAQ,KAAK,CAAC,sCAAsC;QACpD,iEAAiE;QACjE,IAAI,MAAM,KAAK,IAAI,MAAM,KAAK,CAAC,IAAI,KAAK,2BAA2B;YAC/D,OAAO;QACX;QACA,OAAO,CAAC,wDAAwD,EAAE,MAAM,OAAO,IAAI,gBAAgB,oCAAoC,CAAC;IAC1I;AACF;AAMO,eAAe,uCAAoB,GAApB,uBAAuB,WAAmB;IAC9D,MAAM,mBAAmB,YAAY,WAAW;IAChD,IAAI,qBAAqB,UAAU,qBAAqB,QAAQ,OAAO,MAAM,cAAc;IAE3F,MAAM,SAAS,GAAG,iBAAiB,KAAK,CAAC;IACzC,MAAM,cAAc,CAAC,6BAA6B,EAAE,QAAQ;IAC5D,MAAM,cAAc,kBAAkB,OAAO;IAE7C,IAAI,CAAC,aAAa;QAChB,QAAQ,KAAK,CAAC;QACd,OAAO;IACT;IAEA,IAAI;QACF,MAAM,WAAW,MAAM,MAAM,GAAG,mBAAmB,aAAa,EAAE;YAChE,QAAQ;YACR,SAAS;QACX;QAEA,IAAI,CAAC,SAAS,EAAE,EAAE;YAChB,MAAM,YAAY,MAAM,SAAS,IAAI;YACrC,QAAQ,KAAK,CAAC,CAAC,wBAAwB,EAAE,OAAO,EAAE,EAAE,YAAY,GAAG,EAAE,SAAS,MAAM,EAAE,EAAE;YACxF,OAAO;QACT;QAEA,MAAM,SAAS,MAAM,SAAS,IAAI;QAClC,IAAI,OAAO,IAAI,IAAI,OAAO,IAAI,CAAC,MAAM,GAAG,KAAK,OAAO,IAAI,CAAC,EAAE,CAAC,IAAI,EAAE;YAChE,OAAO,WAAW,OAAO,IAAI,CAAC,EAAE,CAAC,IAAI;QACvC;QACA,QAAQ,IAAI,CAAC,CAAC,wBAAwB,EAAE,OAAO,QAAQ,CAAC;QACxD,OAAO;IACT,EAAE,OAAO,OAAY;QACnB,QAAQ,KAAK,CAAC,CAAC,yBAAyB,EAAE,YAAY,UAAU,CAAC,EAAE;QACnE,OAAO;IACT;AACF;;;IA3FsB;IAwDA;;AAxDA,+OAAA;AAwDA,+OAAA","debugId":null}},
    {"offset": {"line": 527, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/services/zeroxService.ts"],"sourcesContent":["\n'use server';\n\n/**\n * @fileOverview Service for interacting with the 0x.org API.\n *\n * This service encapsulates calls to the 0x API for fetching gasless quotes.\n * 0x API Docs: https://0x.org/docs/\n */\n\nconst ZEROX_API_BASE_URL = 'https://api.0x.org';\n\ninterface ZeroExQuoteParams {\n  chainId: number | string;\n  sellToken: string;\n  buyToken: string;\n  sellAmount?: string; // Either sellAmount or buyAmount must be provided\n  buyAmount?: string;\n  takerAddress?: string; // Optional but recommended for more accurate quotes\n  // Add other potential 0x API params as needed, e.g., slippageTolerance\n}\n\ninterface ZeroExQuoteResponse {\n  // Define the expected structure based on 0x API docs\n  // This is a simplified example; consult 0x docs for the full response\n  chainId: number;\n  price: string;\n  guaranteedPrice: string;\n  to: string;\n  data: string;\n  value: string;\n  gas: string;\n  estimatedGas: string;\n  gasPrice: string;\n  protocolFee: string;\n  minimumProtocolFee: string;\n  buyTokenAddress: string;\n  sellTokenAddress: string;\n  buyAmount: string;\n  sellAmount: string;\n  sources: Array<{ name: string; proportion: string }>;\n  allowanceTarget?: string;\n  sellTokenToEthRate: string;\n  buyTokenToEthRate: string;\n  // ... and other fields\n}\n\ninterface ZeroExApiError {\n  code: number;\n  reason: string;\n  validationErrors?: Array<{\n    field: string;\n    code: string;\n    reason: string;\n    description?: string;\n  }>;\n}\n\ninterface FetchGaslessQuoteResult {\n  quote?: ZeroExQuoteResponse;\n  error?: string;\n  errorDetails?: ZeroExApiError;\n}\n\nexport async function fetchGaslessQuote(\n  params: ZeroExQuoteParams\n): Promise<FetchGaslessQuoteResult> {\n  const apiKey = process.env.ZEROX_API_KEY;\n  if (!apiKey) {\n    console.error('ZEROX_API_KEY is not configured in .env');\n    return { error: '0x API key not configured. Cannot fetch gasless quote.' };\n  }\n\n  const queryParams = new URLSearchParams({\n    chainId: String(params.chainId),\n    sellToken: params.sellToken,\n    buyToken: params.buyToken,\n  });\n\n  if (params.sellAmount) {\n    queryParams.append('sellAmount', params.sellAmount);\n  } else if (params.buyAmount) {\n    queryParams.append('buyAmount', params.buyAmount);\n  } else {\n    return { error: 'Either sellAmount or buyAmount must be provided for a 0x quote.' };\n  }\n\n  if (params.takerAddress) {\n    queryParams.append('takerAddress', params.takerAddress);\n  }\n  // Potentially add other params like 'slippagePercentage' if needed\n\n  const requestUrl = `${ZEROX_API_BASE_URL}/gasless/quote?${queryParams.toString()}`;\n\n  try {\n    const response = await fetch(requestUrl, {\n      method: 'GET',\n      headers: {\n        '0x-api-key': apiKey,\n        '0x-version': 'v2', // As per user's curl example\n        'Content-Type': 'application/json',\n      },\n    });\n\n    const responseData = await response.json();\n\n    if (!response.ok) {\n      const errorPayload = responseData as ZeroExApiError;\n      console.error(\n        `0x API Error (${requestUrl}): ${response.status} ${response.statusText}`,\n        errorPayload\n      );\n      return {\n        error: `Failed to fetch gasless quote from 0x API: ${errorPayload.reason || response.statusText}`,\n        errorDetails: errorPayload,\n      };\n    }\n\n    return { quote: responseData as ZeroExQuoteResponse };\n  } catch (error: any) {\n    console.error('Error fetching 0x gasless quote:', error);\n    return {\n      error: `Failed to connect to 0x API for gasless quote. Error: ${error.message || 'Unknown error'}`,\n    };\n  }\n}\n"],"names":[],"mappings":";;;;;;;;AAGA;;;;;CAKC,GAED,MAAM,qBAAqB;AAsDpB,eAAe,uCAAe,GAAf,kBACpB,MAAyB;IAEzB,MAAM,SAAS,QAAQ,GAAG,CAAC,aAAa;IACxC,IAAI,CAAC,QAAQ;QACX,QAAQ,KAAK,CAAC;QACd,OAAO;YAAE,OAAO;QAAyD;IAC3E;IAEA,MAAM,cAAc,IAAI,gBAAgB;QACtC,SAAS,OAAO,OAAO,OAAO;QAC9B,WAAW,OAAO,SAAS;QAC3B,UAAU,OAAO,QAAQ;IAC3B;IAEA,IAAI,OAAO,UAAU,EAAE;QACrB,YAAY,MAAM,CAAC,cAAc,OAAO,UAAU;IACpD,OAAO,IAAI,OAAO,SAAS,EAAE;QAC3B,YAAY,MAAM,CAAC,aAAa,OAAO,SAAS;IAClD,OAAO;QACL,OAAO;YAAE,OAAO;QAAkE;IACpF;IAEA,IAAI,OAAO,YAAY,EAAE;QACvB,YAAY,MAAM,CAAC,gBAAgB,OAAO,YAAY;IACxD;IACA,mEAAmE;IAEnE,MAAM,aAAa,GAAG,mBAAmB,eAAe,EAAE,YAAY,QAAQ,IAAI;IAElF,IAAI;QACF,MAAM,WAAW,MAAM,MAAM,YAAY;YACvC,QAAQ;YACR,SAAS;gBACP,cAAc;gBACd,cAAc;gBACd,gBAAgB;YAClB;QACF;QAEA,MAAM,eAAe,MAAM,SAAS,IAAI;QAExC,IAAI,CAAC,SAAS,EAAE,EAAE;YAChB,MAAM,eAAe;YACrB,QAAQ,KAAK,CACX,CAAC,cAAc,EAAE,WAAW,GAAG,EAAE,SAAS,MAAM,CAAC,CAAC,EAAE,SAAS,UAAU,EAAE,EACzE;YAEF,OAAO;gBACL,OAAO,CAAC,2CAA2C,EAAE,aAAa,MAAM,IAAI,SAAS,UAAU,EAAE;gBACjG,cAAc;YAChB;QACF;QAEA,OAAO;YAAE,OAAO;QAAoC;IACtD,EAAE,OAAO,OAAY;QACnB,QAAQ,KAAK,CAAC,oCAAoC;QAClD,OAAO;YACL,OAAO,CAAC,sDAAsD,EAAE,MAAM,OAAO,IAAI,iBAAiB;QACpG;IACF;AACF;;;IA7DsB;;AAAA,+OAAA","debugId":null}},
    {"offset": {"line": 607, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/lib/actions.ts"],"sourcesContent":["\n\"use server\";\nimport { explainDefiStrategy, ExplainDefiStrategyInput, ExplainDefiStrategyOutput } from '@/ai/flows/defi-strategy-explanation';\nimport { personalizedStrategySuggestions, PersonalizedStrategySuggestionsInput, PersonalizedStrategySuggestionsOutput } from '@/ai/flows/personalized-strategy-suggestions';\nimport { fetchOkxMarketSummary } from '@/services/okxService';\nimport type { ZeroExQuoteParams, FetchGaslessQuoteResult } from '@/services/zeroxService';\nimport { fetchGaslessQuote } from '@/services/zeroxService';\n\nexport async function getStrategyExplanation(input: ExplainDefiStrategyInput): Promise<ExplainDefiStrategyOutput | null> {\n  try {\n    const result = await explainDefiStrategy(input);\n    return result;\n  } catch (error) {\n    console.error(\"Error fetching strategy explanation:\", error);\n    return { explanation: \"<p>Failed to load explanation. Please try again.</p>\" };\n  }\n}\n\nexport async function getPersonalizedSuggestions(input: PersonalizedStrategySuggestionsInput): Promise<PersonalizedStrategySuggestionsOutput | null> {\n  try {\n    const result = await personalizedStrategySuggestions(input);\n    return result;\n  } catch (error) {\n    console.error(\"Error fetching personalized suggestions:\", error);\n    return {\n      suggestedStrategies: \"<p>Failed to load suggestions. Please try again.</p>\",\n      rationale: \"<p>Could not generate rationale due to an error.</p>\"\n    };\n  }\n}\n\nexport async function getOkxMarketConditions(): Promise<string> {\n  try {\n    const marketSummary = await fetchOkxMarketSummary();\n    return marketSummary;\n  } catch (error) {\n    console.error(\"Error fetching market conditions via service:\", error);\n    return \"Failed to retrieve current market conditions. Using fallback mock data: Market is highly volatile. BTC is trending down. DeFi blue chips are stable.\";\n  }\n}\n\nexport async function get0xGaslessQuote(params: ZeroExQuoteParams): Promise<FetchGaslessQuoteResult> {\n    try {\n        const result = await fetchGaslessQuote(params);\n        return result;\n    } catch (error) {\n        console.error(\"Error in get0xGaslessQuote server action:\", error);\n        return {\n            error: \"An unexpected error occurred in the server action.\",\n        };\n    }\n}\n"],"names":[],"mappings":";;;;;;;;AAEA;AACA;AACA;AAEA;;;;;;;;AAEO,eAAe,uCAAoB,GAApB,uBAAuB,KAA+B;IAC1E,IAAI;QACF,MAAM,SAAS,MAAM,CAAA,GAAA,qJAAA,CAAA,sBAAmB,AAAD,EAAE;QACzC,OAAO;IACT,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,wCAAwC;QACtD,OAAO;YAAE,aAAa;QAAuD;IAC/E;AACF;AAEO,eAAe,uCAAwB,GAAxB,2BAA2B,KAA2C;IAC1F,IAAI;QACF,MAAM,SAAS,MAAM,CAAA,GAAA,6JAAA,CAAA,kCAA+B,AAAD,EAAE;QACrD,OAAO;IACT,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,4CAA4C;QAC1D,OAAO;YACL,qBAAqB;YACrB,WAAW;QACb;IACF;AACF;AAEO,eAAe,uCAAoB,GAApB;IACpB,IAAI;QACF,MAAM,gBAAgB,MAAM,CAAA,GAAA,6HAAA,CAAA,wBAAqB,AAAD;QAChD,OAAO;IACT,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,iDAAiD;QAC/D,OAAO;IACT;AACF;AAEO,eAAe,uCAAe,GAAf,kBAAkB,MAAyB;IAC7D,IAAI;QACA,MAAM,SAAS,MAAM,CAAA,GAAA,+HAAA,CAAA,oBAAiB,AAAD,EAAE;QACvC,OAAO;IACX,EAAE,OAAO,OAAO;QACZ,QAAQ,KAAK,CAAC,6CAA6C;QAC3D,OAAO;YACH,OAAO;QACX;IACJ;AACJ;;;IA3CsB;IAUA;IAaA;IAUA;;AAjCA,+OAAA;AAUA,+OAAA;AAaA,+OAAA;AAUA,+OAAA","debugId":null}},
    {"offset": {"line": 686, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 746, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/aethermind/AetherMindClientPage.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport const AetherMindClientPage = registerClientReference(\n    function() { throw new Error(\"Attempted to call AetherMindClientPage() from the server but AetherMindClientPage is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/aethermind/AetherMindClientPage.tsx <module evaluation>\",\n    \"AetherMindClientPage\",\n);\n"],"names":[],"mappings":";;;AAAA;;AACO,MAAM,uBAAuB,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACtD;IAAa,MAAM,IAAI,MAAM;AAAwP,GACrR,oFACA","debugId":null}},
    {"offset": {"line": 760, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/aethermind/AetherMindClientPage.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport const AetherMindClientPage = registerClientReference(\n    function() { throw new Error(\"Attempted to call AetherMindClientPage() from the server but AetherMindClientPage is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/aethermind/AetherMindClientPage.tsx\",\n    \"AetherMindClientPage\",\n);\n"],"names":[],"mappings":";;;AAAA;;AACO,MAAM,uBAAuB,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACtD;IAAa,MAAM,IAAI,MAAM;AAAwP,GACrR,gEACA","debugId":null}},
    {"offset": {"line": 774, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 784, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/page.tsx"],"sourcesContent":["import { AetherMindClientPage } from '@/components/aethermind/AetherMindClientPage';\n\nexport default function Home() {\n  return (\n    <AetherMindClientPage />\n  );\n}\n"],"names":[],"mappings":";;;;AAAA;;;AAEe,SAAS;IACtB,qBACE,8OAAC,wJAAA,CAAA,uBAAoB;;;;;AAEzB","debugId":null}}]
}